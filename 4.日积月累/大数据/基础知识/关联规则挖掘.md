# 关联规则挖掘
## 关联规则简介
* 数据挖掘是一项从大量的记录数据中提取有价值的、人们感兴趣的知识，这些知识是隐含的、事先未知的有用信息，提取的知识一般可表示为概念(Concept)、规则(Rules)、规律(Regular ides)、模式(Patterns)等形式
* 关联规则是当前数据挖掘研究的主要方法之一，它反映一个事物与其他事物之间的相互依存性和关联性。如果两个或者多个事物之间存在一定的关联关系，那么，其中一个事物就能够通过其他事物预测到。
* 典型的关联规则发现问题是对超市中的货篮数据(Market Basket)进行分析。通过发现顾客放入货篮中的不同商品之间的关系来分析顾客的购买习惯。

### 关联规则：发现数据中的规律
* 超市中什么产品会一起购买(组合推荐)
* 顾客在买了一台PC之后下一步会购买(搭配推荐)
* 哪种DNA对药物敏感
* 我们如何自动对web文档进行分类？
* 论文查重
## 关联规则的基本概念
* 设$I=\{i_1,i_2,...,i_m\}$为所有项目的集合，D为事务数据库，事务T是一个项目子集($T\subseteq I$)。每一个事务具有唯一的事务标识TID。设A是一个由项目构成的集合，称为项集。事务T包含项集A，当且仅当$A\subseteq T$。如果项集A中有k个项目，则称其为k项集。
* 项集A在事务数据库D中出现的次数占D中总事务的百分比叫做项集的**支持度**。如果项集的支持度超过用户给定的最小支持度阈值，就称该项集是频繁项集(或频集)
* 关联规则是形如$X\Rightarrow Y$的逻辑蕴含式，其中$X\subset I, Y\subset I$，且$X\cap Y=\varnothing$
* 如果事务数据库D中有s%的事务包含$X\cup Y$,则称关联规则$X\Rightarrow Y$的支持度是s%
* 关联规则的信任度为$support(X\cup Y)/support(X)$,也就是：
  $$support(X\Rightarrow Y)=P(X\cup Y)$$
  $$confidence(X\Rightarrow Y)=P(Y|X)$$

### 强关联规则
强关联规则就是支持度和信任度分别满足用户给定阈值的规则。例如  
|交易ID|购买的商品|
|----|----|
|2000|A,B,C|
|1000|A,C|
|4000|A,D|
|5000|B,E,F|  
设最小支持度为50%，最小可信度为50%，则可得到
  - $A\Rightarrow C(50\%,66.6\%)$
  - $C\Rightarrow A(50\%,100\%)$

## Apriori算法
### 算法简介
* Apriori算法命名源于算法使用了频繁项集性质的先验(Prior)知识。
* Apriori算法将发现关联规则的过程分为两个步骤:
  * 通过迭代，检索出事务数据库中的所有频繁项集，即支持度不低于用户设定的阈值的项集；
  * 利用频繁项集构造出满足用户最小信任度的规则。
* 挖掘或识别出所有频繁项集是该算法的核心，占整个计算量的大部分。
### Apriori的性质：
  * 性质1：频繁项集的所有非空子集必为频繁项集
  * 性质2：非频繁项集的超集一定是非频繁的

### Apriori的步骤：
1. 连接步：为找$L_k$，通过将$L_{k-1}$与自身连接产生候选k项集的集合。
2. 剪枝步：$C_k$是$L_k$的超集，也会是说$C_k$的成员可以是也可以不是频繁的，但所有频繁的k项集都包含在$C_k$中。任何非频繁的(k-1)项集都不是频繁k项集的子集。 
>$L_1$={频繁1项集};  
for(k=2;$L_{k-1}\neq\varnothing;k++$) do begin  
&nbsp;&nbsp;&nbsp; $C_k$=apriori_gen($L_{k-1}$)
